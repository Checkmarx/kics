{
  "Resources": {
    "RedshiftSecurityGroup": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "Redshift access",
        "VpcId": { "Ref": "MyVPC" },
        "SecurityGroupIngress": [
          {
            "IpProtocol": "tcp",
            "FromPort": 5439,
            "ToPort": 5439,
            "CidrIp": "0.0.0.0/0"
          }
        ]
      }
    },
    "RedshiftSubnetGroup": {
      "Type": "AWS::Redshift::ClusterSubnetGroup",
      "Properties": {
        "Description": "Subnet group for Redshift",
        "SubnetIds": [
          { "Ref": "Subnet1" },
          { "Ref": "Subnet2" }
        ],
        "Tags": [
          {
            "Key": "Name",
            "Value": "RedshiftSubnetGroup"
          }
        ]
      }
    },
    "RedshiftCluster": {
      "Type": "AWS::Redshift::Cluster",
      "Properties": {
        "ClusterIdentifier": "tf-redshift-cluster",
        "DBName": "mydb",
        "ClusterSubnetGroupName": { "Ref": "RedshiftSubnetGroup" },
        "VpcSecurityGroupIds": [
          { "Ref": "RedshiftSecurityGroup" }
        ]
      }
    }
  }
}
