service: service
frameworkVersion: '2' 
provider:
  name: aws
  runtime: nodejs12.x
 
functions:
  hello:
    handler: handler.hello
    onError: arn:aws:sns:us-east-1:XXXXXX:test
    tags:
      foo: bar
    role: arn:aws:iam::XXXXXX:role/role
    tracing: Active
resources:
  Resources:
    TestCluster:
      Type: 'AWS::MSK::Cluster'
      Properties:
        ClusterName: ClusterWithAllProperties
        KafkaVersion: 2.2.1
        NumberOfBrokerNodes: 3
        EnhancedMonitoring: PER_BROKER
        EncryptionInfo:
          EncryptionAtRest:
            DataVolumeKMSKeyId: ReplaceWithKmsKeyArn
          EncryptionInTransit:
            ClientBroker: TLS
            InCluster: true
        OpenMonitoring:
          Prometheus:
            JmxExporter:
              EnabledInBroker: "true"
            NodeExporter:
              EnabledInBroker: "true"
        ConfigurationInfo:
          Arn: ReplaceWithConfigurationArn
          Revision: 1
        ClientAuthentication:
          Tls:
            CertificateAuthorityArnList:
              - ReplaceWithCAArn
        Tags:
          Environment: Test
          Owner: QATeam
        BrokerNodeGroupInfo:
          BrokerAZDistribution: DEFAULT
          InstanceType: kafka.m5.large
          SecurityGroups:
            - ReplaceWithSecurityGroupId
          StorageInfo:
            EBSStorageInfo:
              VolumeSize: 100
          ClientSubnets:
            - ReplaceWithSubnetId1
            - ReplaceWithSubnetId2
            - ReplaceWithSubnetId3
