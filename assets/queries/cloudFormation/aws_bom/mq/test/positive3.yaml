service: service
frameworkVersion: '2' 
provider:
  name: aws
  runtime: nodejs12.x
 
functions:
  hello:
    handler: handler.hello
    onError: arn:aws:sns:us-east-1:XXXXXX:test
    tags:
      foo: bar
    role: arn:aws:iam::XXXXXX:role/role
    tracing: Active
resources:
  Resources:
      BasicBroker:
        Type: "AWS::AmazonMQ::Broker"
        Properties:
          AutoMinorVersionUpgrade: "false"
          BrokerName: MyBasicBroker
          DeploymentMode: SINGLE_INSTANCE
          EncryptionOptions:
            UseAwsOwnedKey: true
          EngineType: ActiveMQ
          EngineVersion: "5.15.0"
          HostInstanceType: mq.t2.micro
          PubliclyAccessible: true
          Users:
            -
              ConsoleAccess: "true"
              Groups:
                - MyGroup
              Password:
                Ref: "BrokerPassword"
              Username:
                Ref: "BrokerUsername"

